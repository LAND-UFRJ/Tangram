/*
 * Copyright (C) 1999-2009, Edmundo Albuquerque de Souza e Silva.
 *
 * This file may be distributed under the terms of the Q Public License
 * as defined by Trolltech AS of Norway and appearing in the file
 * LICENSE.QPL included in the packaging of this file.
 *
 * THIS FILE IS PROVIDED AS IS WITH NO WARRANTY OF ANY KIND, INCLUDING
 * THE WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING
 * FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
 * NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION
 * WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */

package Tangram2;

import java.util.Properties;
import java.io.*;

public class T2simulation_options extends javax.swing.JFrame {

  /** Form constructor */  
  public T2simulation_options( ) {
    initComponents();    
    initComponentsManual();
  }

  /** This method is called from within the constructor to
   * initialize the form.
   * WARNING: Do NOT modify this code. The content of this method is
   * always regenerated by the FormEditor.
   */
    private void initComponents() {//GEN-BEGIN:initComponents
        jP_window = new javax.swing.JPanel();
        jP_set_seed = new javax.swing.JPanel();
        jCB_interevent_time = new javax.swing.JCheckBox();
        jTF_interevent_time = new javax.swing.JTextField();
        jCB_probabilistic_action = new javax.swing.JCheckBox();
        jTF_probabilistic_action = new javax.swing.JTextField();
        jCB_get_random_function = new javax.swing.JCheckBox();
        jTF_get_random_function = new javax.swing.JTextField();
        jB_ok = new javax.swing.JButton();
        jB_cancel = new javax.swing.JButton();

        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        setTitle("Tangram II [Simulation Options]");
        setMaximizedBounds(new java.awt.Rectangle(0, 0, 0, 0));
        setResizable(false);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                exitForm(evt);
            }
        });

        jP_window.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jP_window.setMaximumSize(new java.awt.Dimension(800, 800));
        jP_set_seed.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jP_set_seed.setBorder(new javax.swing.border.TitledBorder("General Options for Simulation"));
        jP_set_seed.setName("");
        jCB_interevent_time.setText("Set seed value for interevent time");
        jCB_interevent_time.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCB_interevent_timeActionPerformed(evt);
            }
        });

        jP_set_seed.add(jCB_interevent_time, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 20, -1, -1));

        jTF_interevent_time.setToolTipText("Specify a 12 digits hexadecimal value for interevent time seed");
        jTF_interevent_time.setEnabled(false);
        jP_set_seed.add(jTF_interevent_time, new org.netbeans.lib.awtextra.AbsoluteConstraints(15, 45, 130, -1));

        jCB_probabilistic_action.setText("Set seed value for probabilistic action");
        jCB_probabilistic_action.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCB_probabilistic_actionActionPerformed(evt);
            }
        });

        jP_set_seed.add(jCB_probabilistic_action, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 70, -1, -1));

        jTF_probabilistic_action.setToolTipText("Specify a 12 digits hexadecimal value for probabilistic action seed");
        jTF_probabilistic_action.setEnabled(false);
        jP_set_seed.add(jTF_probabilistic_action, new org.netbeans.lib.awtextra.AbsoluteConstraints(15, 95, 130, -1));

        jCB_get_random_function.setText("Set seed value for get_random function");
        jCB_get_random_function.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCB_get_random_functionActionPerformed(evt);
            }
        });

        jP_set_seed.add(jCB_get_random_function, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 120, -1, -1));

        jTF_get_random_function.setToolTipText("Specify a 12 digits hexadecimal value for get_random function seed");
        jTF_get_random_function.setEnabled(false);
        jP_set_seed.add(jTF_get_random_function, new org.netbeans.lib.awtextra.AbsoluteConstraints(15, 145, 130, -1));

        jP_window.add(jP_set_seed, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, 290, 175));

        jB_ok.setFont(new java.awt.Font("Dialog", 1, 10));
        jB_ok.setText("Ok");
        jB_ok.setToolTipText("Close this window.");
        jB_ok.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jB_okActionPerformed(evt);
            }
        });

        jP_window.add(jB_ok, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 20, 110, 30));

        jB_cancel.setFont(new java.awt.Font("Dialog", 1, 10));
        jB_cancel.setText("Cancel");
        jB_cancel.setToolTipText("Close this window.");
        jB_cancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jB_cancelActionPerformed(evt);
            }
        });

        jP_window.add(jB_cancel, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 60, 110, 30));

        getContentPane().add(jP_window, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 430, 195));

    }//GEN-END:initComponents

    private void jB_cancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jB_cancelActionPerformed
        if( interevent_time != jCB_interevent_time.isSelected() )
        {
            jCB_interevent_time.setSelected( !jCB_interevent_time.isSelected() );
            jTF_interevent_time.enable( !jTF_interevent_time.isEnabled() );
        }

        if( probabilistic_action != jCB_probabilistic_action.isSelected() )
        {
            jCB_probabilistic_action.setSelected( !jCB_probabilistic_action.isSelected() );
            jTF_probabilistic_action.enable( !jTF_probabilistic_action.isEnabled() );
        }
        
        if( get_random_function != jCB_get_random_function.isSelected() )
        {
            jCB_get_random_function.setSelected( !jCB_get_random_function.isSelected() );
            jTF_get_random_function.enable( !jTF_get_random_function.isEnabled() );
        }
        
        setVisible(false);    
    }//GEN-LAST:event_jB_cancelActionPerformed

    private void jCB_get_random_functionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCB_get_random_functionActionPerformed
        if( jCB_get_random_function.isSelected() )
        {
            jTF_get_random_function.enable(true);
        }
        else
        {
            jTF_get_random_function.enable(false);
        }
    }//GEN-LAST:event_jCB_get_random_functionActionPerformed

    private void jCB_probabilistic_actionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCB_probabilistic_actionActionPerformed
        if( jCB_probabilistic_action.isSelected() )
        {
            jTF_probabilistic_action.enable(true);
        }
        else
        {
            jTF_probabilistic_action.enable(false);
        }            
    }//GEN-LAST:event_jCB_probabilistic_actionActionPerformed

    private void jCB_interevent_timeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCB_interevent_timeActionPerformed
        if( jCB_interevent_time.isSelected() )
        {
            jTF_interevent_time.enable(true);
        }            
        else
        {            
            jTF_interevent_time.enable(false);
        }            
    }//GEN-LAST:event_jCB_interevent_timeActionPerformed
    
  private void jB_okActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jB_okActionPerformed
    if( jCB_interevent_time.isSelected() )    
    {
        if( !isValidSeed( jTF_interevent_time.getText() ) )
        {
            javax.swing.JOptionPane.showMessageDialog( this,
                                                       "The seed must be a 12 digits hexadecimal value.",
                                                       "Invalid Seed",
                                                       0);
            return;
        }        
        else
            interevent_time = true;    
    }
    else
        interevent_time = false;
    
    if( jCB_probabilistic_action.isSelected() )
    {
        if( !isValidSeed( jTF_probabilistic_action.getText() ) )
        {
            javax.swing.JOptionPane.showMessageDialog( this,
                                                       "The seed must be a 12 digits hexadecimal value.", 
                                                       "Invalid Seed",
                                                       0);
            return;
        }
        else
            probabilistic_action = true;
    }
    else
        probabilistic_action = false;

    if( get_random_function )
    {
        if( !isValidSeed( jTF_get_random_function.getText() ) )
        {
            javax.swing.JOptionPane.showMessageDialog( this,
                                                       "The seed must be a 12 digits hexadecimal value.", 
                                                       "Invalid Seed",
                                                       0);
            return;    
        }
        else
            get_random_function = true;
    }
    else
        get_random_function = false;
    
    setVisible(false);    
  }//GEN-LAST:event_jB_okActionPerformed

  /** Exit the Application */
  private void exitForm(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_exitForm
    jB_cancelActionPerformed(null);
  }//GEN-LAST:event_exitForm

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jB_cancel;
    private javax.swing.JButton jB_ok;
    public javax.swing.JCheckBox jCB_get_random_function;
    public javax.swing.JCheckBox jCB_interevent_time;
    public javax.swing.JCheckBox jCB_probabilistic_action;
    private javax.swing.JPanel jP_set_seed;
    private javax.swing.JPanel jP_window;
    public javax.swing.JTextField jTF_get_random_function;
    public javax.swing.JTextField jTF_interevent_time;
    public javax.swing.JTextField jTF_probabilistic_action;
    // End of variables declaration//GEN-END:variables
    private boolean interevent_time      = false;
    private boolean probabilistic_action = false;
    private boolean get_random_function  = false;
    
 /********************  Auxiliar functions  ***********************************/
    private boolean isValidSeed( String num )
    {
        int i, j;
        String  valid_digits = "0123456789ABCDEFabcdef";
        boolean valid_digit;
                        
        if( num.length() != 12 )
            return false;
        
        for( i=0; i<num.length(); i++ )
        {
            valid_digit = false;
            for( j=0; j<valid_digits.length(); j++ )
            {
                if( num.charAt(i) == valid_digits.charAt(j) )
                {
                    valid_digit = true;
                    break;
                }
            }
            
            if( !valid_digit )
                return false;
        }
                
        return true;
    }
    
    private void initComponentsManual()
    {
        this.setSize(430,220);
    }
}
